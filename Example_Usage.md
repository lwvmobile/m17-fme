
# M17 - Florida Man Edition

## Using M17-FME with M17-FME (Standalone)

## Using M17-FME with M17_Implementations

m17-fme can be used together with m17-decoder-sym such that it can read in float symbol input generated by m17-fme in real time by tailing its output floatsym.sym file and reading it in and decoding it as m17f-me generates the file.

```
m17-fme -i pulsevx -o pulserf -V -N 2> m17encoder.txt -F ~/floatsym.sym
```

```
tail -f ~/floatsym.sym | ./m17-decoder-sym 
```

Similarly, m17-packet-decode can decode m17-fme generated packet data.

```
m17-fme -P -F ~/floatsym.sym -S 'This is a simple text message sent from m17-fme to m17-packet-decode'
```

```
tail -f ~/floatsym.sym | ./m17-packet-decode
```

m17-fme can take either .rrc, .wav, or float symbol input (preferred) from m17-packet-encode and decode them by doing the following:

```
echo -en "\x05Testing M17 packet mode." | ./m17-packet-encode -S N0CALL -D ALL -C 10 -n 25 -o float.sym -f
```

```
m17-fme -r -f float.sym
```

There are other combinations of usage between M17_Implementations and M17-FME, its up to you to experiment to find them all.

## Using M17-FME with m17-tools

m17-fme can be used together with m17-tools m17-mod, such that m17-mod will modulate audio, and m17-fme will decode it. Here is an example of m17-mod modulating voice stream rf audio from a voiced wav input file, and feeding the RF modulated audio directly into m17-fme to be demodulated and decoded.

Please note, the following example uses AES "256" encryption from m17-tools, which is then decrypted by m17-fme using a 128-bit segment of the same key, noting that m17-tools is hard coded to only with in AES 128-bit mode, and thus, for now, m17-fme will do the same to maintain compatibility (todo: maybe the full sized key modes, and just tell users to put in only 32 of the 64 chars to decrypt m17-tools)

See the samples folder for the 8k1_voice.wav file.

```
sox 8k1_voice.wav -t raw - |  ./m17-mod -S N0CALL -D N0CALL -r -v -K FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF | m17-fme -i - -r -o pulsevx -E "FFFFFFFFFFFFFFFF FFFFFFFFFFFFFFFF"
```

## Full Usage

This is the current usage (subject to change), verbatim, from m17-fme -h option:

```
Usage: m17-fme [options]    Start the Program
  or:  m17-fme -h           Show Help

Display Options:
  -N            Use NCurses Terminal
                 m17-fme -N 2> log.txt 
  -v <num>      Payload Verbosity Level
  -d <num>      Demodulator Verbosity Level

Input Options:

  -i <device>   Audio input device (default is pulserf)
                pulserf for pulse audio RFA input 
                pulsevx for pulse audio Voice / Mic input
                - for STDIN input (specify encoder or decoder options below)
                (Note: When using STDIN, Ncurses Keyboard Shortcuts Disabled)
                (padsp wrapper required for OSS audio on Linux)
                /dev/dsp for OSS audio
                udp for UDP Frame Input (default localhost:17000)
                udp:192.168.7.8:17001 for M17 UDP/IP bind input (Binding Address and Port)
                m17udp:192.168.7.8:17001 for M17 UDP/IP bind input (Binding Address and Port)
  -w <file>     48k/1 SNDFile Compatible RF Audio .wav or .rrc input file
  -c <file>     DSD-FME Compatible Dibit/Symbol Capture Bin input file (from RF Encoder)
  -f <file>     Float Symbol input file (from RF Encoder and M17_Implementations)

Output Options:

  -o <device>   Audio output device (default is pulsevx)
                pulserf for pulse audio RFA output
                pulsevx for pulse audio Voice / Loopback output
                - for STDOUT output (specify encoder or decoder options below)
                (Note: Don't use Ncurses Terminal w/ STDOUT enabled)
                (padsp wrapper required for OSS audio on Linux)
                /dev/dsp for OSS audio
                (OSS Can only do either RF output, or VX output,
                (not both at the same time, specify encoder and decoder options below)
                udp for UDP Frame Output (default localhost:17000)
                udp:192.168.7.8:17001 for M17 UDP/IP blaster output (Target Address and Port)
                m17udp:192.168.7.8:17001 for M17 UDP/IP blaster output (Target Address and Port)
  -W <file>     48k/1 SNDFile Compatible RF Audio .wav output file
  -C <file>     DSD-FME Compatible Dibit/Symbol Capture Bin output file
  -F <file>     Float Symbol output file (M17_Implementations Compatible)

Encoder Options:

  -V            Enable the Stream Voice Encoder
  -P            Enable the Packet Data  Encoder
  -I            Enable IP Frame Output with defaults (can be combined with Loopback or RFA output)
                (can be combined with Loopback or RFA output)
  -L            Enable Internal Encoder Loopback Decoder (must be used with pulsevx output)
  -X            Enable Voice Activated TX (Vox) on Stream Voice Encoder

Encoder Input Strings:

  -M <str>      Set M17 CAN:SRC:DST 
                (example: -M 1:N0CALL:SP5WWP) 
  -U <str>      Set UDP/IP Frame HOST:PORT:MODULE 
                (example: -U 127.0.0.1:17001:B) 
  -S <str>      Enter SMS Message (up to 772 UTF-8 characters) for Packet Data Encoder
                (example: -S 'Hello World! This is a text message')
  -A <str>      Enter SMS Message (Up to 48 UTF-8 characters) For Stream Voice Encoder (Arbitrary Data). Enables 1600 mode.
                (example: -A 'Hello World! This is arbitrary data on 1600')
  -R <hex>      Enter RAW Data for Packet Data Encoder as Hex Octets.
                (example: -R 010203040506070809)
  -x            Encode Inverted Polarity on RF Output

Decoder Options:

  -r            Enable RFA Demodulator and Decoding of Stream and Packet Data
  -x            Expect Inverted Polarity on RF Input
  -u            Enable UDP IP Frame Decoder and Connect to default localhost:17000 
  -p            Per Call decoded voice wav file saving into current directory ./M17WAV folder

Encryption Options:

                (NOTE: Encoder and Decoder share same values here)
  -e <hex>      Enter Scrambler Key Value (up to 24-bit / 6 Hex Character)
                (example: -e ABCDEF)
  -E <hex str>  Enter AES Key Value (in single quote, space every 16 chars) 
                (example: -E '0520C1B0220AFBCA 16FB1330764B26EC 5C34A197764C147A 15FBA7515ED8BCFC')
                (example: -E '0520C1B0220AFBCA 16FB1330764B26EC')
                (NOTE: Due to bug in m17-tools handling of AES keys, all keys are run as AES-128)
                (Limiting significant key value to first 32 characters to maintain compatibility)

Debug Options:

  -1            Generate Random One Time Use 24-bit Scrambler Key 
  -2            Generate Random One Time Use 256-bit AES Key. 
  -4            Permit Data Decoding on CRC Failure (not recommended). 
  -6            Open All Pulse Input / Output and IP Frame Defaults and Send Voice Stream. (Fire Everything!). 
  -8            Disable High Pass Filter on CODEC2 Output. 
  -9            Enable  RRC Filter on RF Audio Encoding / Decoding. 
  -0            Disable RRC Filter on RF Audio Encoding / Decoding.

Quick Examples:

 Stream Voice Encoder with Mic Input (pulsevx) RF Output (pulserf), float symbol file output (float.sym) 
 m17-fme -i pulsevx -o pulserf -V -F float.sym -N 2> m17encoder.txt 
  (Note: When Using Ncurses Terminal with Encoding and Not Vox, use '\' key to toggle TX)

 RF Demodulator for Stream Voice and Data Packet with Decoded Voice Output (pulsevx) 
 m17-fme -i pulserf -o pulsevx -r -N 2> m17decoder.txt 

 Stream Voice Encoder with Mic Input (pulsevx) IP Frame Output 
 m17-fme -i pulsevx -o udp -V -N 2> m17encoder.txt 

 IP Frame Decoder for Voice Stream and Packet Data Default Host and Port 
 m17-fme -i udp -u -o pulsevx -N 2> m17decoder.txt 

 Packet Data Encoder with SMS Message to IP Frame Output to custom port and RF Audio Output
 m17-fme -o pulserf -P -S 'This is a text message' -M 1:M17-FME:ALL -I -U 127.0.0.1:17001:A 

 IP Frame Decoder for Voice Stream and Packet Data Bound to Custom Host and Port 
 m17-fme -i udp:127.0.0.1:17001 -N 2> m17decoder.txt 

```
