
# M17 - Florida Man Edition

## Information

M17-FME is a stand-alone encoder and decoder of [M17 Project](https://m17project.org/ "M17") protocol.
M17-FME uses the open source [Codec2](https://github.com/drowe67/codec2 "Codec2") vocoder, and built on the specifications openly and freely provided under [M17 Protocol Specifications](https://spec.m17project.org/ "M17 Protocol Specifications"). M17-FME should only be considered an 'educational' tool for radio enthusiasts and people interested in tinkering. It is also in an early beta stage, and as such, is prone to error and may have changing functionality over time as features are added, removed, reworked, etc. This tool should never be used for any commercial or critical needs, and any use for ill or malicious intent (jamming, DDOS, trolling, warfare, etc) is NOT CONDONED or TOLERATED!

![M17-FME](https://github.com/lwvmobile/m17-fme/blob/main/m17-fme1.png)

![M17-FME](https://github.com/lwvmobile/m17-fme/blob/main/m17-fme2.png)

## Functionality

### Voice Stream

Voice Stream Encoding and Decoding (RF Audio). Voice Stream Frames can be decoded from any RF Audio source, and M17-FME supports reading in from a Pulse Audio Input Source, OSS Input Source "/dev/dsp", SB16LE 48k/1 STDIN Input, TCP Linked SB16LE 48k/1 Network Source [SDR++](https://github.com/AlexandreRouma/SDRPlusPlus "SDR++"), sndfile compatible SB16LE 48k/1 .wav and .rrc files generated by any compatible M17 project source or recorded from OTA from an actual radio, float symbol input files generated by [M17_Implementations](https://github.com/M17-Project/M17_Implementations "M17_Implementations"), and dibit capture format (capture.bin) generated by [DSD-FME](https://github.com/lwvmobile/dsd-fme "DSD-FME").

When operating in encoding mode, Voice Stream can be modulated in FSK4 48k/1 SB16LE RF Audio output to Pulse Audio Sink, OSS Audio Sink, STDOUT, .wav file, or float symbol output file. Also, while in Encoding Mode, encoded data can also be send back into the decoder via a loopback functionality which will inturn decode the encoded bitstream, with audio output being either decoded voice output, encoded RF output, or both through seperate output sinks.

When operating in decoding mode, RF audio can be captured and saved with floating symbol output file, and decoded voice can be saved on a 'per call' basis with wav file creation for each new call after a no-sync period.

Voice Encoding and Decoding support both Codec2 3200 bps mode "full rate" and Codec2 1600 bps "half rate" modes, per specification. To encode in 1600 bps mode, the user on needs to specify some Arbitrary Data to the encoder, which is in turn handled as an embedded SMS message of up to 48 UTF-8 Characters to be decoded every superframe.

It should also be noted, that M17-FME does not support simultaneous encoding and decoding, as in, you open one session to encode, and can have a second to decode, but one session cannot receive RF audio and encode (transmit) when not receiving. This functionality may be introduced in future updates. M17-FME does however, support a loopback mode where encoded data can be sent back into the decoder side to be decoded as its encoded. Keep in mind, only pulse audio, or a combination of output to audio sink and file will allow both sending of RF audio AND encoded voice playback simultaneously.

### Packet Data

Packet Data Encoding and Decoding (RF Audio). Same input and output methods as listed above are available for Packet Data. Currently, only SMS text message protocol is expressely supported by Packet Data Encoding, while all standardized protocols (GNSS, etc) are decoded via the decoder if from another source. Users can encode an SMS message of up to 772 characters.

### UDP/IP Frame Format

M17-FME is capable of transmitting and receiving UDP frames based on the specification linked above. This input and output has NOT BEEN TESTED on currently operating reflectors, and its status as working is unknow. M17-FME can however, communicate over UDP/IP Protocol to another M17-FME session. Also, note, that M17-FME can only encode and send IP frames, or receive and decode IP frames currently, there is no mode that handles simultaneous operation. IP Frame format can be encoded and sent over UDP either alone, or in conjunction with RF encoded audio output.

NOTE: Encodng and Decoding of Packet Data over IP Frames has not been standardized in the M17 specifications, but operates with the same idea in mind as Voice Stream, where one UDP datagram is crafted with a complete LSF Link Data Setup, and the entire Packet Data contents and delivered all in one go.

### Encryption

M17-FME supports both the encryption and decryption of Voice Stream using AES and Scrambler modes per specification. The official stance from M17-FME is that encryption should be used as a tool, and in the context of M17-FME, it is available as a learning tool. When using encryption mode, M17-FME will craft and send your encryption key and encryption type as both a Packet, and embedded into Link Setup Data periodically in the clear. "Over the Air Key Delivery" or "OTAKD" was devised as a method to both allow and learn form the use of encryption, but to also freely and openly provide the encryption key to others to use while decoding. This 'format' is NOT per M17 specification, but is a method devised internally to allow the use of encryption while sharing the key for others. OTAKD can be disabled by compiling M17-FME with the `cmake -DOTAKD=OFF ..` cmake option.


### Quick Examples

```

 Stream Voice Encoder with Mic Input (pulsevx) RF Output (pulserf), float symbol file output (float.sym) 
 m17-fme -i pulsevx -o pulserf -V -F float.sym -N 2> m17encoder.txt 
  (Note: When Using Ncurses Terminal with Encoding and Not Vox, use '\' key to toggle TX)

 RF Demodulator for Stream Voice and Data Packet with Decoded Voice Output (pulsevx) 
 m17-fme -i pulserf -o pulsevx -r -N 2> m17decoder.txt 

 Stream Voice Encoder with Mic Input (pulsevx) IP Frame Output 
 m17-fme -i pulsevx -o udp -V -N 2> m17encoder.txt 

 IP Frame Decoder for Voice Stream and Packet Data Default Host and Port 
 m17-fme -i udp -u -o pulsevx -N 2> m17decoder.txt 

 Packet Data Encoder with SMS Message to IP Frame Output to custom port and RF Audio Output
 m17-fme -o pulserf -P -S 'This is a text message' -M 1:M17-FME:ALL -I -U 127.0.0.1:17001:A 

 IP Frame Decoder for Voice Stream and Packet Data Bound to Custom Host and Port 
 m17-fme -i udp:127.0.0.1:17001 -N 2> m17decoder.txt 

```

Please see [Usage](https://github.com/lwvmobile/m17-fme/blob/main/Usage.md "Usage") for a complete set of use case scenarios and configuration.

### How to Build

Please see [Install Notes](https://github.com/lwvmobile/m17-fme/blob/main/Install_Notes.md "Install Notes") for information on cloning and compiling M17-FME.

## License

